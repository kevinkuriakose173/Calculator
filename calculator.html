<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="calculator.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@500&display=swap" rel="stylesheet">
  </head>
  <body onkeydown="
    keyPressed(event.key);">
    <div class="everything">
      <h1>Kevin Kuriakose's Calculator</h1>
      <div class="calculator">
        <div class="display">
          <p class="js-display"></p>
        </div>
        <div class="numbers-and-functions">
          <div class="rows">
            <button onclick="
              updateCalculation('1');
              ">1
            </button>
            <button onclick="
              updateCalculation('2');
              ">2
            </button>
            <button onclick="
              updateCalculation('3');
              ">3
            </button>
            <button onclick="
              updateCalculation('+');
              ">+
            </button>
          </div>
          <div class="rows">
            <button onclick="
              updateCalculation('4');
              ">4
            </button>
            <button onclick="
              updateCalculation('5');
              ">5
            </button>
            <button onclick="
              updateCalculation('6');
              ">6
            </button>
            <button onclick="
              updateCalculation('-');
              ">-
            </button>
          </div>
          <div class="rows">
            <button onclick="
              updateCalculation('7');
              ">7
            </button>
            <button onclick="
            updateCalculation('8');
            ">8
            </button>
            <button onclick="
              updateCalculation('9');
              ">9
            </button>
            <button onclick="
              updateCalculation('*');
              ">*
            </button>
          </div>
          <div class="rows">
            <button onclick="
              updateCalculation('0');
              ">0
            </button>
            <button onclick="
              updateCalculation('.');
              ">.
            </button>
            <button onclick="
              calculation = eval(calculation);
              displayCalculation();
              localStorage.setItem('calculation', calculation);
              /*clears calculation after calculating, figure out way to make it so that if function is pressed next, continues calculating, but if number is pressed next, calcuation is cleared.
              
              /*
              calculation = '';
              localStorage.setItem('calculation', calculation);
              */">=
            </button>
            <button onclick="
              updateCalculation('/');
              ">/
            </button>
          </div>
          <div class="clear-row">
            <button class="clear-button" onclick="
                calculation = '';
                localStorage.setItem('calculation', calculation);
                displayCalculation();
              ">Clear
            </button>
          </div>
        </div>
      </div>
      
    </div>
    <script>
      let calculation = localStorage.getItem('calculation') || '';

      displayCalculation();

      function updateCalculation(value) {
        calculation += value;
        displayCalculation();
        localStorage.setItem('calculation', calculation);
      }

      function displayCalculation() {
        document.querySelector('.js-display').innerHTML = calculation;
      }
      
      function keyPressed(value) {
        if(['1','2','3','4','5','6','7','8','9','0','+','-','*','/'].indexOf(value) > -1){
          updateCalculation(value);
        } else if (value === '=' || value === 'Enter') {
          calculation = eval(calculation);
          displayCalculation();
          localStorage.setItem('calculation', calculation);
        } else if (value === 'Backspace') {
          calculation = '';
          localStorage.setItem('calculation', calculation);
          displayCalculation();
        }
      }
    </script>
  </body>
</html>